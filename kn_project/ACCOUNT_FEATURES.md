# TÃ­nh NÄƒng Account - HÆ°á»›ng Dáº«n HoÃ n Thiá»‡n

## ğŸ“‹ Tá»•ng Quan
Pháº§n account Ä‘Ã£ Ä‘Æ°á»£c hoÃ n thiá»‡n vá»›i Ä‘áº§y Ä‘á»§ tÃ­nh nÄƒng Ä‘á»ƒ ngÆ°á»i dÃ¹ng quáº£n lÃ½ há»“ sÆ¡ cÃ¡ nhÃ¢n, cÃ i Ä‘áº·t tÃ i khoáº£n, xem má»¥c yÃªu thÃ­ch vÃ  lá»‹ch sá»­ tÃ¬m kiáº¿m.

## âœ¨ CÃ¡c TÃ­nh NÄƒng ÄÃ£ ThÃªm

### 1. **ThÃ´ng Tin CÃ¡ NhÃ¢n (Profile Tab)**
- Hiá»ƒn thá»‹ tÃªn Ä‘Äƒng nháº­p
- Hiá»ƒn thá»‹ email
- Hiá»ƒn thá»‹ ID tÃ i khoáº£n
- Hiá»ƒn thá»‹ ngÃ y táº¡o tÃ i khoáº£n
- Hiá»ƒn thá»‹ loáº¡i tÃ i khoáº£n (NgÆ°á»i dÃ¹ng thÆ°á»ng / Äá»‘i tÃ¡c)
- Bá»‘ cá»¥c tháº» thÃ´ng tin vá»›i thiáº¿t káº¿ Ä‘áº¹p

### 2. **CÃ i Äáº·t TÃ i Khoáº£n (Settings Tab)**
#### a) Thay Ä‘á»•i TÃªn ÄÄƒng Nháº­p
- Cho phÃ©p nháº­p tÃªn Ä‘Äƒng nháº­p má»›i
- Kiá»ƒm tra tÃ­nh há»£p lá»‡ (Ã­t nháº¥t 2 kÃ½ tá»±)
- Kiá»ƒm tra xem tÃªn Ä‘Ã³ Ä‘Ã£ tá»“n táº¡i chÆ°a
- ThÃ´ng bÃ¡o lá»—i/thÃ nh cÃ´ng

#### b) Thay Ä‘á»•i Email
- Cho phÃ©p nháº­p email má»›i
- Kiá»ƒm tra Ä‘á»‹nh dáº¡ng email há»£p lá»‡
- Kiá»ƒm tra xem email Ä‘Ã³ Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½ chÆ°a
- ThÃ´ng bÃ¡o lá»—i/thÃ nh cÃ´ng

#### c) Thay Ä‘á»•i Máº­t Kháº©u
- Nháº­p máº­t kháº©u hiá»‡n táº¡i (Ä‘á»ƒ xÃ¡c nháº­n)
- Nháº­p máº­t kháº©u má»›i
- XÃ¡c nháº­n máº­t kháº©u má»›i
- Kiá»ƒm tra máº­t kháº©u hiá»‡n táº¡i cÃ³ Ä‘Ãºng khÃ´ng
- Kiá»ƒm tra máº­t kháº©u má»›i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±
- ThÃ´ng bÃ¡o lá»—i/thÃ nh cÃ´ng

### 3. **Má»¥c YÃªu ThÃ­ch (Favorites Tab)**
- Hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ phÃ²ng trá» mÃ  ngÆ°á»i dÃ¹ng yÃªu thÃ­ch
- Má»—i má»¥c cÃ³ tiÃªu Ä‘á» vÃ  ngÃ y yÃªu thÃ­ch
- NÃºt "Xem chi tiáº¿t" Ä‘á»ƒ xem thÃ´ng tin chi tiáº¿t phÃ²ng trá»
- NÃºt "Bá» yÃªu thÃ­ch" Ä‘á»ƒ xÃ³a khá»i danh sÃ¡ch
- ThÃ´ng bÃ¡o "ChÆ°a yÃªu thÃ­ch phÃ²ng nÃ o" náº¿u danh sÃ¡ch trá»‘ng
- Link Ä‘áº¿n trang khÃ¡m phÃ¡ phÃ²ng trá»

### 4. **Lá»‹ch Sá»­ TÃ¬m Kiáº¿m (Search History Tab)**
- Hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ láº§n tÃ¬m kiáº¿m cá»§a ngÆ°á»i dÃ¹ng
- Má»—i má»¥c hiá»ƒn thá»‹ tá»« khÃ³a tÃ¬m kiáº¿m vÃ  ngÃ y tÃ¬m
- NÃºt "TÃ¬m kiáº¿m láº¡i" Ä‘á»ƒ thá»±c hiá»‡n láº¡i tÃ¬m kiáº¿m
- NÃºt "XÃ³a" Ä‘á»ƒ xÃ³a má»¥c khá»i lá»‹ch sá»­
- ThÃ´ng bÃ¡o "ChÆ°a tÃ¬m kiáº¿m gÃ¬" náº¿u danh sÃ¡ch trá»‘ng
- Link Ä‘áº¿n trang khÃ¡m phÃ¡ phÃ²ng trá»

## ğŸ”„ Äiá»u HÆ°á»›ng LÆ°á»¡ng HÆ°á»›ng
- Header cÃ³ nÃºt "ThÃ´ng tin" trong menu profile táº¡i `user_ui.html`
- Menu profile cÃ³ nÃºt "CÃ i Ä‘áº·t tÃ i khoáº£n"
- NÃºt "ÄÄƒng xuáº¥t" Ä‘á»ƒ quay láº¡i trang chá»§

## ğŸ¨ Giao Diá»‡n & Thiáº¿t Káº¿
- **Tab Navigation**: 4 tab chÃ­nh (ThÃ´ng tin, CÃ i Ä‘áº·t, YÃªu thÃ­ch, Lá»‹ch sá»­)
- **Responsive Design**: TÆ°Æ¡ng thÃ­ch vá»›i má»i kÃ­ch thÆ°á»›c mÃ n hÃ¬nh
- **MÃ u Sáº¯c**: Äen/tráº¯ng, consistent vá»›i toÃ n bá»™ trang web
- **Animation**: Fade-in khi chuyá»ƒn tab
- **Card Layout**: Thiáº¿t káº¿ tháº» rÃµ rÃ ng, dá»… Ä‘á»c

## ğŸ“± Responsive Breakpoints
- **1200px+**: Thiáº¿t káº¿ desktop Ä‘áº§y Ä‘á»§ (4 tab hÃ ng ngang)
- **768px - 1199px**: Tablet (4 tab hÃ ng ngang, cÃ¡c thÃ nh pháº§n thÃ­ch á»©ng)
- **< 768px**: Mobile (4 tab hÃ ng dá»c, cÃ¡c input Ä‘áº§y chiá»u rá»™ng)
- **< 480px**: Small mobile (text vÃ  nÃºt nhá» láº¡i)

## ğŸ” Báº£o Máº­t
- Kiá»ƒm tra token JWT trÆ°á»›c má»—i request
- Chá»‰ ngÆ°á»i dÃ¹ng cÃ³ token há»£p lá»‡ má»›i cÃ³ thá»ƒ truy cáº­p trang
- Tá»± Ä‘á»™ng chuyá»ƒn hÆ°á»›ng vá» index.html náº¿u chÆ°a Ä‘Äƒng nháº­p
- Máº¥t kháº©u Ä‘Æ°á»£c mÃ£ hÃ³a báº±ng werkzeug hash
- Email vÃ  username Ä‘Æ°á»£c kiá»ƒm tra tÃ­nh duy nháº¥t

## ğŸ› ï¸ Backend API Endpoints

### User Profile Updates
```
PUT /api/user/<user_id>/update-username
PUT /api/user/<user_id>/update-email
PUT /api/user/<user_id>/update-password
```

### Favorites Management
```
GET /api/favorites/<user_id>
DELETE /api/favorites/<user_id>/<property_id>
```

### Search History Management
```
GET /api/search-history/<user_id>
DELETE /api/search-history/<user_id>/<history_id>
```

## ğŸ“ Tá»‡p ÄÆ°á»£c Cáº­p Nháº­t

### Frontend
- `vsls:/account/user_ui.html` - ThÃªm 4 tab content, form settings
- `vsls:/account/user_ui.css` - CSS cho tab layout, form styling, responsive design

### Backend
- `vsls:/backend/app.py` - ThÃªm 10 endpoints má»›i cho account management

## âœ… Quy TrÃ¬nh Sá»­ Dá»¥ng

### Khi ngÆ°á»i dÃ¹ng truy cáº­p `user_ui.html`:
1. **Kiá»ƒm tra xÃ¡c thá»±c**: Kiá»ƒm tra token JWT
2. **Náº¿u chÆ°a Ä‘Äƒng nháº­p**: Chuyá»ƒn hÆ°á»›ng vá» index.html
3. **Náº¿u Ä‘Ã£ Ä‘Äƒng nháº­p**:
   - Táº£i thÃ´ng tin cÃ¡ nhÃ¢n
   - Táº£i danh sÃ¡ch yÃªu thÃ­ch
   - Táº£i lá»‹ch sá»­ tÃ¬m kiáº¿m
   - Hiá»ƒn thá»‹ giao diá»‡n

### Khi ngÆ°á»i dÃ¹ng cáº­p nháº­t thÃ´ng tin:
1. XÃ¡c thá»±c token
2. Kiá»ƒm tra tÃ­nh há»£p lá»‡ cá»§a dá»¯ liá»‡u
3. Kiá»ƒm tra xung Ä‘á»™t (email/username Ä‘Ã£ tá»“n táº¡i?)
4. Cáº­p nháº­t vÃ o accounts.json
5. Cáº­p nháº­t localStorage
6. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng/lá»—i

### Khi ngÆ°á»i dÃ¹ng quáº£n lÃ½ yÃªu thÃ­ch/lá»‹ch sá»­:
1. XÃ¡c thá»±c token
2. Fetch dá»¯ liá»‡u tá»« favorites.json hoáº·c search_history.json
3. Hiá»ƒn thá»‹ danh sÃ¡ch
4. Cho phÃ©p xÃ³a hoáº·c thá»±c hiá»‡n hÃ nh Ä‘á»™ng
5. Cáº­p nháº­t dá»¯ liá»‡u tá»©c thá»i

## ğŸš€ CÃ¡ch Cháº¡y & Kiá»ƒm Thá»­

### 1. Báº¯t Ä‘áº§u Backend
```bash
cd backend
python app.py
```

### 2. Truy cáº­p trang account
```
http://localhost:5000/account/user_ui.html
# Hoáº·c truy cáº­p qua link tá»« profile popup menu
```

### 3. Kiá»ƒm thá»­ cÃ¡c tÃ­nh nÄƒng
- Thay Ä‘á»•i tÃªn Ä‘Äƒng nháº­p
- Thay Ä‘á»•i email
- Thay Ä‘á»•i máº­t kháº©u
- Xem yÃªu thÃ­ch
- Xem lá»‹ch sá»­ tÃ¬m kiáº¿m

## ğŸ“Š Cáº¥u TrÃºc Dá»¯ Liá»‡u

### accounts.json
```json
{
  "users": {
    "user#00001": {
      "id": "user#00001",
      "email": "user@example.com",
      "username": "myusername",
      "password": "hashed_password",
      "account_type": "user",
      "created_at": "2025-10-20T12:00:00"
    }
  },
  "next_user_id": 6,
  "next_partner_id": 1
}
```

### favorites.json
```json
{
  "user#00001": ["property1", "property2", "property3"]
}
```

### search_history.json
```json
{
  "user#00001": [
    {
      "type": "area",
      "area": "HÃ²a Láº¡c",
      "keyword": "phÃ²ng trá»",
      "timestamp": "2025-11-12T10:30:00"
    }
  ]
}
```

## ğŸ¯ TÃ­nh NÄƒng Tiá»m NÄƒng Trong TÆ°Æ¡ng Lai

- [ ] XÃ³a tÃ i khoáº£n
- [ ] Hai lá»›p xÃ¡c thá»±c (2FA)
- [ ] Cáº­p nháº­t avatar há»“ sÆ¡
- [ ] Thá»‘ng kÃª hoáº¡t Ä‘á»™ng (sá»‘ láº§n xem, Ä‘Ã£ yÃªu thÃ­ch bao nhiÃªu)
- [ ] Xuáº¥t dá»¯ liá»‡u lá»‹ch sá»­
- [ ] Cáº£nh bÃ¡o cho phÃ²ng yÃªu thÃ­ch
- [ ] Chia sáº» yÃªu thÃ­ch vá»›i báº¡n

## ğŸ› Ghi ChÃº

- **CORS**: Enabled Ä‘á»ƒ cÃ³ thá»ƒ gá»i API tá»« frontend
- **Token**: JWT token cÃ³ hiá»‡u lá»±c 7 ngÃ y
- **HTTPS**: Khuyáº¿n nghá»‹ sá»­ dá»¥ng HTTPS trong production
- **Rate Limiting**: CÃ³ thá»ƒ thÃªm rate limiting Ä‘á»ƒ báº£o vá»‡ API

---
**PhiÃªn báº£n**: 1.0  
**Cáº­p nháº­t láº§n cuá»‘i**: 2025-11-12
